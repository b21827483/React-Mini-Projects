{"ast":null,"code":"import _regeneratorRuntime from \"D:/tor/React-Mini-Projects/Meetups-Nextjs/node_modules/@babel/runtime/regenerator\";\nimport _asyncToGenerator from \"D:/tor/React-Mini-Projects/Meetups-Nextjs/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";\nimport { MongoClient } from 'mongodb';\nexport default function handler(_x, _x2) {\n  return _handler.apply(this, arguments);\n}\n\nfunction _handler() {\n  _handler = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee(req, res) {\n    var _req$body, title, image, address, description, meetupsCollection, result;\n\n    return _regeneratorRuntime.wrap(function _callee$(_context) {\n      while (1) {\n        switch (_context.prev = _context.next) {\n          case 0:\n            if (req.method === 'POST') {\n              _req$body = req.body, title = _req$body.title, image = _req$body.image, address = _req$body.address, description = _req$body.description;\n              meetupsCollection = mongoConnect();\n              result = meetupsCollection.insertOne(req.body);\n              res.status(201).json({\n                message: 'Successfully added to meetups.'\n              });\n            }\n\n          case 1:\n          case \"end\":\n            return _context.stop();\n        }\n      }\n    }, _callee);\n  }));\n  return _handler.apply(this, arguments);\n}\n\nexport function mongoConnect() {\n  return _mongoConnect.apply(this, arguments);\n}\n\nfunction _mongoConnect() {\n  _mongoConnect = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee2() {\n    var client, db, meetupsCollection;\n    return _regeneratorRuntime.wrap(function _callee2$(_context2) {\n      while (1) {\n        switch (_context2.prev = _context2.next) {\n          case 0:\n            _context2.next = 2;\n            return MongoClient.connect('mongodb+srv://bug:NuvH56WQMAsSULW8@cluster0.jkhsyu7.mongodb.net/?retryWrites=true&w=majority&appName=Cluster0');\n\n          case 2:\n            client = _context2.sent;\n            db = client.db('test');\n            meetupsCollection = db.collection('meetups');\n            return _context2.abrupt(\"return\", meetupsCollection);\n\n          case 6:\n          case \"end\":\n            return _context2.stop();\n        }\n      }\n    }, _callee2);\n  }));\n  return _mongoConnect.apply(this, arguments);\n}","map":{"version":3,"sources":["D:/tor/React-Mini-Projects/Meetups-Nextjs/pages/api/new-meetup.js"],"names":["MongoClient","handler","req","res","method","body","title","image","address","description","meetupsCollection","mongoConnect","result","insertOne","status","json","message","connect","client","db","collection"],"mappings":";;AAAA,SAAQA,WAAR,QAA0B,SAA1B;AAEA,wBAA8BC,OAA9B;AAAA;AAAA;;;sEAAe,iBAAuBC,GAAvB,EAA4BC,GAA5B;AAAA;;AAAA;AAAA;AAAA;AAAA;AAEX,gBAAID,GAAG,CAACE,MAAJ,KAAe,MAAnB,EAA2B;AAAA,0BACsBF,GAAG,CAACG,IAD1B,EAChBC,KADgB,aAChBA,KADgB,EACTC,KADS,aACTA,KADS,EACFC,OADE,aACFA,OADE,EACOC,WADP,aACOA,WADP;AAGjBC,cAAAA,iBAHiB,GAGGC,YAAY,EAHf;AAKjBC,cAAAA,MALiB,GAKRF,iBAAiB,CAACG,SAAlB,CAA4BX,GAAG,CAACG,IAAhC,CALQ;AAOvBF,cAAAA,GAAG,CAACW,MAAJ,CAAW,GAAX,EAAgBC,IAAhB,CAAqB;AAACC,gBAAAA,OAAO,EAAE;AAAV,eAArB;AACH;;AAVU;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,G;;;;AAaf,gBAAsBL,YAAtB;AAAA;AAAA;;;2EAAO;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,mBACkBX,WAAW,CAACiB,OAAZ,CAAoB,+GAApB,CADlB;;AAAA;AACGC,YAAAA,MADH;AAGGC,YAAAA,EAHH,GAGQD,MAAM,CAACC,EAAP,CAAU,MAAV,CAHR;AAIGT,YAAAA,iBAJH,GAIuBS,EAAE,CAACC,UAAH,CAAc,SAAd,CAJvB;AAAA,8CAKIV,iBALJ;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,G","sourcesContent":["import {MongoClient} from 'mongodb'\r\n\r\nexport default async function handler(req, res) {\r\n\r\n    if (req.method === 'POST') {\r\n        const {title, image, address, description} = req.body;\r\n\r\n        const meetupsCollection = mongoConnect();\r\n\r\n        const result = meetupsCollection.insertOne(req.body)\r\n\r\n        res.status(201).json({message: 'Successfully added to meetups.'})\r\n    }\r\n}\r\n\r\nexport async function mongoConnect() {\r\n    const client = await MongoClient.connect('mongodb+srv://bug:NuvH56WQMAsSULW8@cluster0.jkhsyu7.mongodb.net/?retryWrites=true&w=majority&appName=Cluster0');\r\n\r\n    const db = client.db('test');\r\n    const meetupsCollection = db.collection('meetups');\r\n    return meetupsCollection;\r\n}\r\n"]},"metadata":{},"sourceType":"module"}